<ion-header>
  <ion-toolbar color='primary'>
    <ion-buttons slot="start" (click)='closeModal()'>
      <ion-icon name="arrow-back-outline"></ion-icon>
    </ion-buttons>
    <ion-title text-center>Detalle cuenta</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content style="--background:white">  
  <ion-toolbar  class="tarj" style="margin-top: 2rem; --background:black; margin-bottom: 1rem;">
    <ion-title>Detalle</ion-title>
    <br>
    <ion-card *ngIf="pedido">
      <ion-item-group>
        <form [formGroup]="form" >
          <ion-item class="full-width-input">
            <ion-label position='floating'>Atencion</ion-label>
            <ion-select formControlName="atencion" (ionChange)="subtotal()">
              <!-- (selectionChange)="seleccionUsuario()" -->
              <ion-select-option *ngFor="let atencion of atenciones" [value]="atencion.value">
                {{atencion.viewValue}}
              </ion-select-option>
            </ion-select> 
          </ion-item>
        </form>
        <ion-item-divider></ion-item-divider>
        <ion-item>
          <ion-label>Mesa: {{pedido.mesa}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Total: ${{pedido.total}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Propina: ${{form.value.atencion}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Descuento: {{pedido.descuento | descuentoComponente}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Sub total: ${{subMonto}}</ion-label>
        </ion-item>
      </ion-item-group>
      
      <ion-card-content>
        <ion-list>
          <ion-card-title>Orden:</ion-card-title>
          <ion-item *ngFor="let plato of pedido.platos">
            <ion-avatar slot="start">
              <img src={{plato.img1}}>
            </ion-avatar>
            <ion-label>
              <h3>{{plato.nombre}}</h3>
              <p>{{plato.descripcion}}</p>
            </ion-label> 
          </ion-item>
        </ion-list>
      </ion-card-content>
      <ion-button style="width: 50%;" [disabled]="!form.value" color='secondary'  (click)="pedirCuenta()">Pedir cuenta</ion-button>
    </ion-card>
  </ion-toolbar>
</ion-content>